<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Training Bottlenecks: A Harsh Reality of AI Models | ThirdAI</title>
<meta name="keywords" content="Blog, Deep Learning, BOLT, CPU, Training, Neural Network, AI" />
<meta name="description" content="There is no silver bullet AI modality. Better predictions require a constant cycle of feature engineering, hyper-parameter tuning, training, and testing the resultant models. The most time-consuming stage of any AI-powered application pipeline is fine tuning, which often requires repeated iterations of network training to expose performance gains. Even with AutoML and Neural Architecture Search (NAS), engineering features and hammering out other task-specific pipelines in an AI system is unavoidable.">
<meta name="author" content="ThirdAILabs">
<link rel="canonical" href="https://canonical.url/to/page" />
<meta name="google-site-verification" content="XYZabc" />
<meta name="yandex-verification" content="XYZabc" />
<meta name="msvalidate.01" content="XYZabc" />
<link crossorigin="anonymous" href="//thirdailabs.github.io/static/css/stylesheet.min.2b65407eaa69bd34c5c68586f0d2ea90d4de57878dab3703c9d50c07b038c297.css" integrity="sha256-K2VAfqppvTTFxoWG8NLqkNTeV4eNqzcDydUMB7A4wpc=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="//thirdailabs.github.io/static/js/highlight.min.6d1e6445bf9633f53328ec09c930d3a224f52d7e9189f23826b78432b974ca98.js" integrity="sha256-bR5kRb&#43;WM/UzKOwJyTDToiT1LX6RifI4JreEMrl0ypg="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="//thirdailabs.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="//thirdailabs.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="//thirdailabs.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="//thirdailabs.github.io/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="//thirdailabs.github.io/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.93.2" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }

        }
    </style>
</noscript><meta property="og:title" content="Training Bottlenecks: A Harsh Reality of AI Models" />
<meta property="og:description" content="There is no silver bullet AI modality. Better predictions require a constant cycle of feature engineering, hyper-parameter tuning, training, and testing the resultant models. The most time-consuming stage of any AI-powered application pipeline is fine tuning, which often requires repeated iterations of network training to expose performance gains. Even with AutoML and Neural Architecture Search (NAS), engineering features and hammering out other task-specific pipelines in an AI system is unavoidable." />
<meta property="og:type" content="article" />
<meta property="og:url" content="//thirdailabs.github.io/resources/blog/training-bottlenecks/" />
<meta property="og:image" content="//thirdailabs.github.io/%3Cimage%20path/url%3E" /><meta property="article:section" content="resources" />
<meta property="article:published_time" content="2022-01-22T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2022-01-22T00:00:00&#43;00:00" /><meta property="og:site_name" content="ThirdAI" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="//thirdailabs.github.io/%3Cimage%20path/url%3E" />
<meta name="twitter:title" content="Training Bottlenecks: A Harsh Reality of AI Models"/>
<meta name="twitter:description" content="There is no silver bullet AI modality. Better predictions require a constant cycle of feature engineering, hyper-parameter tuning, training, and testing the resultant models. The most time-consuming stage of any AI-powered application pipeline is fine tuning, which often requires repeated iterations of network training to expose performance gains. Even with AutoML and Neural Architecture Search (NAS), engineering features and hammering out other task-specific pipelines in an AI system is unavoidable."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Resources",
      "item": "//thirdailabs.github.io/resources/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Blog",
      "item": "//thirdailabs.github.io/resources/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Training Bottlenecks: A Harsh Reality of AI Models",
      "item": "//thirdailabs.github.io/resources/blog/training-bottlenecks/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Training Bottlenecks: A Harsh Reality of AI Models",
  "name": "Training Bottlenecks: A Harsh Reality of AI Models",
  "description": "There is no silver bullet AI modality. Better predictions require a constant cycle of feature engineering, hyper-parameter tuning, training, and testing the resultant models. The most time-consuming stage of any AI-powered application pipeline is fine tuning, which often requires repeated iterations of network training to expose performance gains. Even with AutoML and Neural Architecture Search (NAS), engineering features and hammering out other task-specific pipelines in an AI system is unavoidable.",
  "keywords": [
    "Blog", "Deep Learning", "BOLT", "CPU", "Training", "Neural Network", "AI"
  ],
  "articleBody": "There is no silver bullet AI modality. Better predictions require a constant cycle of feature engineering, hyper-parameter tuning, training, and testing the resultant models. The most time-consuming stage of any AI-powered application pipeline is fine tuning, which often requires repeated iterations of network training to expose performance gains. Even with AutoML and Neural Architecture Search (NAS), engineering features and hammering out other task-specific pipelines in an AI system is unavoidable.\nDomain adaptation and transfer learning are cheap but inferior alternatives to constant retraining Currently, domain adaptation and transfer learning alternatives are the best way to sidestep the expenses of training. But such solutions are appealing only where retraining is entirely prohibitive. Otherwise, if accuracy matters and resources allow, it’s always a good idea to rebuild the model from scratch. In nearly all cases, retraining from scratch results in a significant performance improvement. Instead of avoiding retraining, the path forward for AI research is to develop more efficient training.\nImprovements to model deployment have also been much discussed as the future of AI development. Here, the task is to search for models where inference is cheap. Perhaps the search space can be quantized, or pruned, or some other efficient design can be brought to bear. But in the end, it circles back to fast training. Cutting-edge research using Deep Reinforcement Learning for efficient ASICs is still bottlenecked by how fast we can train and search for the most energy-efficient configuration.\nThe faster we validate complex network architectures, the quicker we move the AI innovation wheel Improvements in architecture validation efficiency pay immediate and constant dividends for the process of creating AI solutions. The quicker we can validate different methods, the earlier we reach dominance for a specific task.\nThis is why we’re excited to reveal BOLT, our solution to the need for faster and more accessible neural network training. Via purely algorithmic innovations, BOLT can supercharge commodity CPUs for training large models. Not only can BOLT train commercial-sized neural networks on CPUs, it can do so with superior performance even when compared to GPUs using the strongest competing software. Best of all, our algorithmic improvements don’t rely on specialized hardware: BOLT can be used on virtually any CPU (Intel, AMD, ARM).\nYou can read more about BOLT here, or try it out now. BTW: If this research sounds like fun, we’re hiring.\n",
  "wordCount" : "391",
  "inLanguage": "en",
  "image":"//thirdailabs.github.io/%3Cimage%20path/url%3E","datePublished": "2022-01-22T00:00:00Z",
  "dateModified": "2022-01-22T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "ThirdAILabs"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "//thirdailabs.github.io/resources/blog/training-bottlenecks/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "ThirdAI",
    "logo": {
      "@type": "ImageObject",
      "url": "//thirdailabs.github.io/%3Clink%20/%20abs%20url%3E"
    }
  }
}
</script>
</head>

<body class="list" id="top">
<script>
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<div class="hero">
  <header class="header">
      <nav class="nav">
          <div class="logo">
              <a href="//thirdailabs.github.io/" accesskey="h" title="ThirdAI (Alt + H)">
                    <img class="icon" alt="logo" aria-label="logo" height="35"></img>ThirdAI</a>
              <span class="logo-switches">
              </span>
          </div>
          <ul id="menu">
              <li >
                  
                  <div class="dropdown">
                    <button class="drop-button">Solutions</button>
                    <div class="drop-content">
                        
                          <a  href="//thirdailabs.github.io/solutions/question-answering">
                            Question Answering
                          </a>
                        
                          <a  href="//thirdailabs.github.io/solutions/text-classification">
                            Sentiment Classification
                          </a>
                        
                          <a  href="//thirdailabs.github.io/solutions/product-recommendation">
                            Product Recommendation
                          </a>
                        
                    </div>
                  </div>
                  
              </li>
              <li >
                  
                      <a href="//thirdailabs.github.io/engine/bolt">
                          <div class="menu-item">
                              Engine
                          </div>
                      </a>
                  
              </li>
              <li >
                  
                  <div class="dropdown">
                    <button class="drop-button">Resources</button>
                    <div class="drop-content">
                        
                          <a  href="//thirdailabs.github.io/resources/documentation">
                            Documentation
                          </a>
                        
                          <a  href="//thirdailabs.github.io/resources/webinars">
                            Webinars
                          </a>
                        
                          <a  href="//thirdailabs.github.io/resources/blog">
                            Blog
                          </a>
                        
                          <a  href="//thirdailabs.github.io/resources/demo">
                            Demo
                          </a>
                        
                    </div>
                  </div>
                  
              </li>
              <li >
                  
                  <div class="dropdown">
                    <button class="drop-button">Company</button>
                    <div class="drop-content">
                        
                          <a  href="//thirdailabs.github.io/company/about">
                            About
                          </a>
                        
                          <a  href="//thirdailabs.github.io/company/careers/">
                            Careers
                          </a>
                        
                    </div>
                  </div>
                  
              </li>
              <li >
                  
                      <a href="//thirdailabs.github.io/contact/">
                          <div class="menu-item">
                              Contact
                          </div>
                      </a>
                  
              </li>
          </ul>

          <input class="checkbox" type="checkbox" name="" id=""/>
          <div class="hamburger-lines">
            <span class="line line1"></span>
            <span class="line line2"></span>
            <span class="line line3"></span>
          </div>

          <div class="mobile-menu-items">
              <li><a href="//thirdailabs.github.io/solutions/">Solutions</a></li>
            
              <li><a href="//thirdailabs.github.io/engine/bolt">Engine</a></li>
            
              <li><a href="//thirdailabs.github.io/resources/">Resources</a></li>
            
              <li><a href="//thirdailabs.github.io/company/">Company</a></li>
            
              <li><a href="//thirdailabs.github.io/contact/">Contact</a></li>
            
          </div>
      </nav>
  </header>
</div>

    <main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="//thirdailabs.github.io/">Home</a>&nbsp;»&nbsp;<a href="//thirdailabs.github.io/resources/blog/">Blog</a>&nbsp;»&nbsp;<a>Training Bottlenecks: A Harsh Reality of AI Models</a>
</div>
    <h1 class="post-title">
      Training Bottlenecks: A Harsh Reality of AI Models
    </h1>
    <div class="post-meta"><span title='2022-01-22 00:00:00 +0000 UTC'>January 22, 2022</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;ThirdAILabs

</div>
  </header> 
  <div class="post-content"><img class="bottleneck-graphic" alt="Bottleneck Graphic">
<p>There is no silver bullet AI modality. Better predictions require a constant cycle of feature engineering, hyper-parameter tuning, training, and testing the resultant models. The most time-consuming stage of any AI-powered application pipeline is fine tuning, which often requires repeated iterations of network training to expose performance gains. Even with AutoML and Neural Architecture Search (NAS), engineering features and hammering out other task-specific pipelines in an AI system is unavoidable.</p>
<h3 id="domain-adaptation-and-transfer-learning-are-cheap-but-inferior-alternatives-to-constant-retraining">Domain adaptation and transfer learning are cheap but inferior alternatives to constant retraining</h3>
<p>Currently, domain adaptation and transfer learning alternatives are the best way to sidestep the expenses of training. But such solutions are appealing only where retraining is entirely prohibitive. Otherwise, if accuracy matters and resources allow, it&rsquo;s always a good idea to rebuild the model from scratch. In nearly all cases, retraining from scratch results in a significant performance improvement. Instead of avoiding retraining, the path forward for AI research is to develop more efficient training.</p>
<p>Improvements to model deployment have also been much discussed as the future of AI development. Here, the task is to search for models where inference is cheap. Perhaps the search space can be quantized, or pruned, or some other efficient design can be brought to bear. But in the end, it circles back to fast training. Cutting-edge research using Deep Reinforcement Learning for efficient ASICs is still bottlenecked by how fast we can train and search for the most energy-efficient configuration.</p>
<h3 id="the-faster-we-validate-complex-network-architectures-the-quicker-we-move-the-ai-innovation-wheel">The faster we validate complex network architectures, the quicker we move the AI innovation wheel</h3>
<p>Improvements in architecture validation efficiency pay immediate and constant dividends for the process of creating AI solutions. The quicker we can validate different methods, the earlier we reach dominance for a specific task.</p>
<p>This is why we&rsquo;re excited to reveal <a href="//thirdailabs.github.io/engine/bolt">BOLT</a>, our solution to the need for faster and more accessible neural network training. Via purely algorithmic innovations, BOLT can supercharge commodity CPUs for training large models. Not only can BOLT train commercial-sized neural networks on CPUs, it can do so with superior performance even when compared to GPUs using the strongest competing software. Best of all, our algorithmic improvements don’t rely on specialized hardware: BOLT can be used on virtually any CPU (Intel, AMD, ARM).</p>
<p>You can read more about BOLT <a href="//thirdailabs.github.io/engine/bolt">here</a>, or <a href="//thirdailabs.github.io/resources/demo">try it out now</a>. BTW: If this research sounds like fun, <a href="//thirdailabs.github.io/company/careers">we&rsquo;re hiring</a>.</p>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="//thirdailabs.github.io/tags/blog/">Blog</a></li>
      <li><a href="//thirdailabs.github.io/tags/deep-learning/">Deep Learning</a></li>
      <li><a href="//thirdailabs.github.io/tags/bolt/">BOLT</a></li>
      <li><a href="//thirdailabs.github.io/tags/cpu/">CPU</a></li>
      <li><a href="//thirdailabs.github.io/tags/training/">Training</a></li>
      <li><a href="//thirdailabs.github.io/tags/neural-network/">Neural Network</a></li>
      <li><a href="//thirdailabs.github.io/tags/ai/">AI</a></li>
    </ul>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Training Bottlenecks: A Harsh Reality of AI Models on twitter"
        href="https://twitter.com/intent/tweet/?text=Training%20Bottlenecks%3a%20A%20Harsh%20Reality%20of%20AI%20Models&amp;url=%2f%2fthirdailabs.github.io%2fresources%2fblog%2ftraining-bottlenecks%2f&amp;hashtags=Blog%2cDeepLearning%2cBOLT%2cCPU%2cTraining%2cNeuralNetwork%2cAI">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Training Bottlenecks: A Harsh Reality of AI Models on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2f%2fthirdailabs.github.io%2fresources%2fblog%2ftraining-bottlenecks%2f&amp;title=Training%20Bottlenecks%3a%20A%20Harsh%20Reality%20of%20AI%20Models&amp;summary=Training%20Bottlenecks%3a%20A%20Harsh%20Reality%20of%20AI%20Models&amp;source=%2f%2fthirdailabs.github.io%2fresources%2fblog%2ftraining-bottlenecks%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Training Bottlenecks: A Harsh Reality of AI Models on facebook"
        href="https://facebook.com/sharer/sharer.php?u=%2f%2fthirdailabs.github.io%2fresources%2fblog%2ftraining-bottlenecks%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main>
    
<footer class="fat-footer">
  <div class="wrapper">
    <div class="fat-footer-social">
      <a href="https://twitter.com/ThirdAILab">
        <img src="//thirdailabs.github.io/images/twitter.svg" width=50px class="footer-icon">
      </a>
      <a href="https://www.linkedin.com/company/thirdai-corp">
        <img src="//thirdailabs.github.io/images/linkedin.svg" width=45px class="footer-icon">
      </a>
      <a href="#"> 
        <img src="//thirdailabs.github.io/images/facebook.svg" width=22px class="footer-icon">
      </a>
    </div>
    <div class="fat-footer-menus">
      <div class="menu-container">
        <div class="menu-title">
          <h3>solutions</h3>
        </div>
        <div class="menu-content">
          <ul>
            <li><a href="//thirdailabs.github.io/solutions/question-answering">Question Answering</a></li>
            <li><a href="//thirdailabs.github.io/solutions/text-classification">Text Classification</a></li>
            <li><a href="//thirdailabs.github.io/solutions/product-recommendation">Product Recommendation</a></li>
          </ul>
        </div>
      </div>

      <div class="menu-container">
        <div class="menu-title">
          <h3>engine</h3>
        </div>
        <div class="menu-content">
          <ul>
            <li><a href="//thirdailabs.github.io/engine/bolt">BOLT</a></li>
          </ul>
        </div>
      </div>

      <div class="menu-container">
        <div class="menu-title">
          <h3>resources</h3>
        </div>
        <div class="menu-content">
          <ul>
            <li><a href="#">Documentation</a></li>
            <li><a href="#">Webinars</a></li>
            <li><a href="//thirdailabs.github.io/resources/blog">Blog</a></li>
            <li><a href="//thirdailabs.github.io/resources/demo">Demo</a></li>
          </ul>
        </div>
      </div>

      <div class="menu-container">
        <div class="menu-title">
          <h3>company</h3>
        </div>
        <div class="menu-content">
          <ul>
            <li><a href="//thirdailabs.github.io/company/about">About us</a></li>
            <li><a href="//thirdailabs.github.io/company/careers">Careers</a></li>
            <li><a href="//thirdailabs.github.io/contact">Contact</a></li>
          </ul>
        </div>

      </div>

    </div>
  </div>
  <div class="copyright-wrapper">
    <div class="logo">
      <a href="//thirdailabs.github.io/">
            <img src="//thirdailabs.github.io/images/logo-dark.png" alt="logo" height="35"></img>ThirdAI</a>
    </div>
    <div class="copyright">
      <span>&copy; 2022 <a href="//thirdailabs.github.io/">ThirdAI</a></span>
    </div>
  </div>



</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
